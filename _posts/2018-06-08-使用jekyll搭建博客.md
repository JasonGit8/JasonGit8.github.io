---
layout: post
published: true
title: jekyll搭建博客
category: Git
tags: 
  - [jekyll]
excerpt: 只用 Markdown HTML & CSS 就可以构建可部署的静态网站。

---

#### **1. 安装Jekyll**
通过`RubyInstaller`安装，[jekyll官方文档](https://jekyllrb.com/docs/installation/windows/)

---

#### **2. 下载ruby**
`ruby`一种简单快捷的面向对象脚本语言 

`window`系统下，下载地址：[http://rubyinstaller.org/](http://rubyinstaller.org/)。

![image](/assets/img/readme/jekyll_01.png)  

下载版本`Ruby + Devkit 2.6.1-1（x64）`，双击安装，勾选上添加到环境变量 `Add Ruby executables to your PATH.`  

安装完成，打开命令行输入`ruby-v`和`gem-v`  
看到版本说明安装成功  

---

#### **3. 安装jekyll和Bundler**
```cpp
安装`jekyll`和`Bundler`
    $ gem install jekyll bundler
如果出现报错：
    could not find a valid gem 'jekyll'
解决：
    查看是否存在 http://rubygems.org 
		$ gem source
	如果没有
		$ gem sources -a https://rubygems.org
	再运行
		$ gem install jekyll bundler
检查是否安装成功：
    $ jekyll -v
```

---

#### **4. 新建安jekyll项目**
```cpp
新建安`jekyll`项目
	$ jekyll new blog-demo
	$ cd blog-demo
执行预览
    $ jekyll server
    $ jekyll server --watch // 自动刷新
```

---

#### **5. 目录解析**
```cpp
.
├── _config.yml     // 配置文件
├── _includes/      // 公用文件 引入：` include head.html `
├── _layouts/       // 页面模板
        └── default.html    // 通用模板
        └── home.html       // 首页
        └── post.html       // 文章页
├── _posts/         // 所有文章放在这里
        └── 2018-06-08-jekyll博客.md
├── _site/          // 生成的静态页面，上传到git
├── index.html      // => index.md 改成.html
// 新建静态文件夹
├── assets/
    └── css/
    └── fonts/
    └── img/
    └── js/
// 新建其它页面
├── about/
    └── index.html  // => http://example.com/about/
├── contact/
    └── index.html  // => http://example.com/contact/
```

---

#### **6. 配置分页**
```cpp
安装 jekyll-paginate
    $ gem install jekyll-paginate
配置 _config.yml
    plugins:
        + - jekyll-paginate
    + paginate: 8
    + paginate_path: "page:num" # /index.html将会读取这个设置，把他传给每个分页页面
配置 Gemfile
    + gem 'jekyll-paginate', group: :jekyll_plugins
```

---

#### **7. jekyll无法本地预览中文文件**
修改安装目录\Ruby22-x64\lib\ruby\2.2.0\webrick\httpservlet下的filehandler.rb文件，建议先备份  
找到下列两处，添加一句（+的一行为添加部分）
```cpp
1.
path = req.path_info.dup.force_encoding(Encoding.find("filesystem"))
+ path.force_encoding("UTF-8") # 加入编码
if trailing_pathsep?(req.path_info)

break if base == "/"
+ base.force_encoding("UTF-8") # 加入编码
break unless File.directory?(File.expand_path(res.filename + base))
```
修改完重启 jekyll 即可。

#### **8. 项目提交到GitPage**
[点击查看]({{ site.baseurl }}{% post_url 2017-07-08-GitHub搭建网站 %})